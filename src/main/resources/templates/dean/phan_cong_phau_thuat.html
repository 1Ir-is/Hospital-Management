<!-- templates/department-head/phan_cong_phau_thuat.html -->
<!DOCTYPE html>
<html lang="vi"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{department-head/layout/layout}">
<head>
  <title>PhÃ¢n cÃ´ng bÃ¡c sÄ© pháº«u thuáº­t</title>
</head>
<body>
<div layout:fragment="main-content">
  <h3 class="mb-4">ğŸ› ï¸ PhÃ¢n cÃ´ng bÃ¡c sÄ© pháº«u thuáº­t</h3>

  <div class="card shadow-sm mb-3">
    <div class="card-body">
      <p><strong>Bá»‡nh nhÃ¢n:</strong> <span th:text="${record.medicalRecord.patient.name}">TÃªn</span></p>
      <p><strong>PhÃ²ng:</strong> <span th:text="${record.bed.room.number}">PhÃ²ng</span></p>
      <p><strong>NgÃ y nháº­p viá»‡n:</strong> <span th:text="${#temporals.format(record.admissionDate, 'dd-MM-yyyy')}">NgÃ y</span></p>
    </div>
  </div>

  <form th:action="@{/department-head/surgeries/save}" method="post" class="row g-3">
    <input type="hidden" name="recordId" th:value="${record.id}"/>
    <input type="hidden" name="departmentId" th:value="${departmentId}"/>

    <div class="col-md-6">
      <label class="form-label">ğŸ‘¨â€âš•ï¸ Chá»n bÃ¡c sÄ©</label>
      <select name="employeeId" class="form-select" required>
        <option value="" disabled selected>-- Chá»n bÃ¡c sÄ© --</option>
        <option th:each="d : ${doctorList}" th:value="${d.id}" th:text="${d.name}"
                th:selected="${surgery.employee?.id == d.id}"></option>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label">ğŸ› ï¸ Loáº¡i pháº«u thuáº­t</label>
      <select name="surgeryTypeId" class="form-select" required>
        <option value="" disabled selected>-- Chá»n loáº¡i --</option>
        <option th:each="t : ${surgeryTypeList}" th:value="${t.id}" th:text="${t.name}"
                th:selected="${surgery.surgeryType?.id == t.id}"></option>
      </select>
    </div>

    <div class="col-md-6">
      <label class="form-label">ğŸ“… NgÃ y pháº«u thuáº­t</label>
      <input type="date" name="date" class="form-control"
             th:value="${surgery.date != null ? surgery.date : ''}" required>
    </div>

    <div class="col-md-6">
      <label class="form-label">ğŸ“ Ghi chÃº</label>
      <input type="text" name="note" class="form-control"
             th:value="${surgery.note != null ? surgery.note : ''}">
    </div>

    <div class="col-12 d-flex gap-2">
      <button class="btn btn-success" type="submit">ğŸ’¾ LÆ°u phÃ¢n cÃ´ng</button>
      <a th:href="@{/department-head/list-inpatient}" class="btn btn-secondary">â† Quay láº¡i</a>
    </div>
  </form>
</div>

<div layout:fragment="page-scripts">
  <script>
    setTimeout(function () {
      const alert = document.getElementById('alertSuccess');
      if (alert) {
        alert.classList.add('d-none');
      }
    }, 3000);
  </script>
</div>
</body>
</html>
