<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Nhập kết quả xét nghiệm</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">

<h3 class="text-center text-primary">Nhập kết quả xét nghiệm</h3>

<form method="post" enctype="multipart/form-data" th:action="@{/lab-technician/save_result}">
  <input type="hidden" name="testOrderId" th:value="${testOrderId}" />
  <input type="hidden" name="type" th:value="${type}" />
  <input type="hidden" name="testType" th:value="${testType}" />

  <!-- === BLOOD TEST === -->
  <div th:if="${testType == 'Xét nghiệm máu'}">
    <h5 class="text-success">Xét nghiệm máu</h5>
    <div class="row">
      <div class="col-md-6">
        <label>WBC (White Blood Cell - Bạch cầu)</label>
        <input class="form-control mb-2" type="text" name="wbc" placeholder="x10^3/µL"/>

        <label>RBC (Red Blood Cell - Hồng cầu)</label>
        <input class="form-control mb-2" type="text" name="rbc" placeholder="x10^6/µL"/>

        <label>HGB (Hemoglobin - Huyết sắc tố)</label>
        <input class="form-control mb-2" type="text" name="hgb" placeholder="g/dL"/>

        <label>HCT (Hematocrit - Thể tích hồng cầu)</label>
        <input class="form-control mb-2" type="text" name="hct" />

        <label>PLT (Tiểu cầu)</label>
        <input class="form-control mb-2" type="text" name="plt" />
      </div>
    </div>
  </div>

  <!-- === XRAY TEST === -->
  <div th:if="${testType == 'X-quang'}">
    <h5 class="text-success">Xét nghiệm X-quang</h5>
    <label>Chẩn đoán X-quang:</label>
    <textarea class="form-control mb-2" name="xrayComment" rows="3" placeholder="Mô tả tổn thương, vị trí..."></textarea>

    <label>Ảnh X-quang:</label>
    <input class="form-control mb-3" type="file" name="xrayImage" accept="image/*" />
  </div>

  <!-- === ULTRASOUND TEST === -->
  <div th:if="${type == 'ultrasound'}">
    <h5 class="text-success">Xét nghiệm Siêu âm</h5>
    <label>Nhận xét siêu âm:</label>
    <textarea class="form-control mb-2" name="ultrasoundComment" rows="3" placeholder="Ghi chú hình ảnh gan, thận, tụy, lách..."></textarea>

    <label>Ảnh siêu âm:</label>
    <input class="form-control mb-3" type="file" name="ultrasoundImage" accept="image/*" />
  </div>

  <div class="text-center">
    <button type="submit" class="btn btn-primary">Lưu kết quả</button>
    <a th:href="@{/lab-technician}" class="btn btn-secondary">Quay lại</a>
  </div>
</form>
</body>
</html>
