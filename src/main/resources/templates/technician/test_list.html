<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Danh s√°ch phi·∫øu x√©t nghi·ªám</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<body class="container mt-4">

<h2 class="text-primary mb-4">
  üìã Danh s√°ch Phi·∫øu X√©t Nghi·ªám Theo Ph√≤ng
</h2>

<!-- B·ªô l·ªçc lo·∫°i n·ªôi tr√∫ / ngo·∫°i tr√∫ -->
<div class="mb-4">
  <a th:href="@{/lab-technician/room/{id}(id=${roomId}, type='inpatient')}"
     th:classappend="${type == 'inpatient'} ? 'btn-primary' : 'btn-outline-primary'"
     class="btn me-2">
    üè• N·ªôi tr√∫
  </a>
  <a th:href="@{/lab-technician/room/{id}(id=${roomId}, type='outpatient')}"
     th:classappend="${type == 'outpatient'} ? 'btn-success' : 'btn-outline-success'"
     class="btn">
    üßë‚Äç‚öïÔ∏è Ngo·∫°i tr√∫
  </a>
</div>

<!-- B·∫£ng danh s√°ch phi·∫øu x√©t nghi·ªám -->
<table class="table table-bordered table-striped align-middle">
  <thead class="table-light">
  <tr>
    <th>STT</th>
    <th>B·ªánh nh√¢n</th>
    <th>X√©t nghi·ªám</th>
    <th>Ghi ch√∫</th>
    <th>Tr·∫°ng th√°i</th>
    <th colspan="2" class="text-center">H√†nh ƒë·ªông</th>
  </tr>
  </thead>
  <tbody>
  <tr th:each="order,status : ${testOrderPage.content}">
    <td th:text="${status.count}"></td>
    <td th:text="${order.patientName}"></td>
    <td th:text="${order.name}"></td>
    <td th:text="${order.note} ?: '-'"></td>
    <td>
      <span th:if="${order.status == 'ƒê√£ ho√†n t·∫•t'}" class="badge bg-success">‚úÖ ƒê√£ ho√†n t·∫•t</span>
      <span th:if="${order.status == 'Ch∆∞a th·ª±c hi·ªán'}" class="badge bg-warning text-dark">‚è≥ Ch∆∞a th·ª±c hi·ªán</span>
      <span th:if="${order.status == 'ƒê√£ h·ªßy'}" class="badge bg-danger">‚ùå ƒê√£ h·ªßy</span>
      <span th:if="${order.status != 'ƒê√£ ho√†n t·∫•t' and order.status != 'Ch∆∞a th·ª±c hi·ªán' and order.status != 'ƒê√£ h·ªßy'}"
            class="badge bg-secondary" th:text="${order.status}"></span>
    </td>
    <td class="text-center">
      <a th:href="@{/lab-technician/input_result(id=${order.id}, type=${type})}"
         class="btn btn-sm btn-warning">Nh·∫≠p k·∫øt qu·∫£</a>
    </td>
    <td class="text-center">
      <a th:href="@{/lab-technician/patient_test/{id}(id=${order.patientId}, roomId=${roomId})}"
         class="btn btn-sm btn-info">Xem t·∫•t c·∫£</a>
    </td>
  </tr>
  </tbody>
</table>

<!-- Ph√¢n trang -->
<nav>
  <ul class="pagination justify-content-center">
    <li class="page-item" th:classappend="${testOrderPage.first} ? 'disabled'">
      <a class="page-link"
         th:href="@{/lab-technician/room/{id}(id=${roomId}, page=${testOrderPage.number - 1}, type=${type})}">
        ‚óÄÔ∏è Tr∆∞·ªõc
      </a>
    </li>
    <li th:each="i : ${#numbers.sequence(0, testOrderPage.totalPages - 1)}"
        class="page-item" th:classappend="${i == testOrderPage.number} ? 'active'">
      <a class="page-link"
         th:href="@{/lab-technician/room/{id}(id=${roomId}, page=${i}, type=${type})}"
         th:text="${i + 1}">1</a>
    </li>
    <li class="page-item" th:classappend="${testOrderPage.last} ? 'disabled'">
      <a class="page-link"
         th:href="@{/lab-technician/room/{id}(id=${roomId}, page=${testOrderPage.number + 1}, type=${type})}">
        Ti·∫øp ‚ñ∂Ô∏è
      </a>
    </li>
  </ul>
</nav>

</body>
</html>
